# Architecture

> Auto-generated by /map on 2026-02-10

## Overview

Referral Refiner is a single-page application (SPA) built with React and Vite. It serves as a dashboard for managing contracts, reporting, and data imports. The application uses a modern stack with TypeScript, Tailwind CSS, and Shadcn UI for component styling.

```
┌─────────────────────────────────────────┐
│               [main.tsx]                │
│             Entry Point                 │
├─────────────────────────────────────────┤
│               [App.tsx]                 │
│        Routing & Auth Protection        │
├─────────────────────────────────────────┤
│           [AppLayout.tsx]               │
│        Navigation & Structure           │
├─────────────────────────────────────────┤
│             [Pages]                     │
│  Dashboard, Contracts, Reports, etc.    │
└─────────────────────────────────────────┘
```

## Components

### Core Application
- **App.tsx**: Handles client-side routing using `react-router-dom`. Implements `ProtectedRoute` and `AuthRoute` wrappers to secure access based on authentication status from `useAuth`.
- **AppLayout**: Provides the persistent layout (sidebar, header) for authenticated pages.

### Pages
- **Dashboard**: Main landing view.
- **Contracts**: Contract management interface.
- **Reports**: Reporting and analytics view.
- **ImportExcel**: specific functionality for importing data via Excel.
- **Settings**: Application configuration.

### UI Components
- **Shadcn UI**: Located in `src/components/ui`, provides accessible, styled primitives (Buttons, Dialogs, Inputs, etc.) based on Radix UI.
- **Layout**: `src/components/layout` contains structural components.

## Data Flow

### Authentication
- Authentication state is managed via the `useAuth` hook (`src/hooks/useAuth`).
- Routes are protected to ensure only authenticated users access the dashboard features.

### State & Data Fetching
- **TanStack Query (React Query)**: Used for managing server state, caching, and data synchronization. The `QueryClient` is initialized in `App.tsx`.
- **Zod & React Hook Form**: Used for form validation and state management, ensuring type-safe user inputs.

## Integration Points

| library | Type | Purpose |
|---------|------|---------|
| **ExcelJS** | Utility | used for handling Excel file imports/exports (`src/lib/excelExport.ts`). |
| **Recharts** | Library | Used for visualizing data in the Reports or Dashboard pages. |

## Conventions

- **Styling**: Tailwind CSS is used for utility-first styling.
- **Components**: Functional components with TypeScript.
- **Directory Structure**:
    - `components/ui`: Generic UI components.
    - `components/[feature]`: Feature-specific components.
    - `pages`: Route-level components.
    - `lib`: Utility functions and shared logic.
    - `hooks`: Custom React hooks.
